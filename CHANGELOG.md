# 📋 ERP 2025 版本更新日志

## 版本规范说明

### 版本号格式：`主版本.次版本.修订版本` (例如: 1.2.3)

- **主版本 (Major)**: 重大功能更新、架构变更、不兼容的 API 变更
- **次版本 (Minor)**: 新功能添加、功能增强、向后兼容的变更
- **修订版本 (Patch)**: Bug 修复、小优化、安全补丁

### 更新类型标识

- 🚀 **新功能** (Feature)
- 🐛 **Bug修复** (Bugfix)
- ⚡ **性能优化** (Performance)
- 🔧 **配置变更** (Config)
- 📚 **文档更新** (Documentation)
- 🔒 **安全更新** (Security)
- 💥 **破坏性变更** (Breaking Change)
- 🎨 **UI/UX改进** (UI/UX)
- 🔨 **重构** (Refactor)

---

## 📅 版本历史

### [2.0.0] - 2025-08-17

#### 🚀 新功能
- 添加了每个客户的余额账户，可以在清账的时候将剩余的金额存入自己的账户
- 添加了清账时公司代码的自动补全
- 给定价元素建表，存储基本信息和计算逻辑树和计算逻辑顺序
- 添加了新的定价元素DCBV、DCBP，可以通过设置定价元素给物品进行折扣设置
- 添加了定价元素的高级搜索和自动补全
- 可以在侧栏进行后端端口的自定义设置

#### 🔨 重构
- 与真实的后端完全对接
- 对上一版本的后端的询价单读写、报价单读写、销售单读写、发货单创建、发货流程、发票创建、清账流程做了业务逻辑补全
- 删除了页面上的调试信息

#### 🐛 Bug修复
- 修复了发货的状态不改变问题
- 修复了发货搜索字段不匹配的问题
- 修复了清账时查询不到发票或混入其他货币的发票的问题
- 修复了文档流链接失败的问题
- 修复了创建询价单、报价单、销售单、发票时净价和税价计算错误的问题
- 修复了物品定价元素无法添加的问题
- 修复了创建发货单时重量、容积计算错误的问题
- 修复了清账流程中后端余额计算错误的问题
- 修复了带千分位逗号的金额在后端无法处理的问题
- 修复了物品存储时主字段缺失的问题
- 修复了物品存储时定价元素缺失的问题
- 修复了物品自动补全时的所有计算逻辑
- 修复了物品自动补全时的单位转换问题
- 修复了销售单搜索失败的问题
- 修复了询价单、物料文档、BP关系ID高级搜索失效的问题
- 修复了物品信息补全时不重新计算净值的问题
- 修复了多个过滤条件中对空字符串的错误处理

#### 💥破坏性变更
- 删除了业务看板
- 删除了库存管理模块
- 删除了报价单中的期望值字段

### [1.0.4] - 2025-08-11

#### 🐛 Bug修复
- 补全了Billing Document的物品列表查询
- 提高物品列表查询在网络错误或服务器错误时异常处理的健壮性

#### 🔨 重构
- 统一物品列表查询方法，避免了代码内重复造轮子的问题，增加可维护性

---

### [1.0.4] - 2025-08-11

#### 🚀 新功能
- 业务看板

#### 🐛 Bug修复
- 第二次前后端联调

---

### [1.0.3] - 2025-08-10

#### 🐛 Bug修复
- 客户管理前后端修复

---

### [1.0.2] - 2025-08-09

#### 🎨 UI/UX更新
- SideZone添加了用户头像、用户名，调整登出按钮的位置

---

### [1.0.1] - 2025-08-07

#### 🔧 配置变更
- 修复 Nginx 配置文件语法错误
- 移除 API 代理配置，简化前端服务
- 优化 SPA 路由处理，解决页面刷新 404 问题

#### 🚀 新功能
- 添加版本号管理系统
- 支持指定版本号部署
- 实现自动版本递增机制

#### ⚡ 性能优化
- Docker 镜像分层缓存优化
- 依赖和源代码分离构建
- 强制拉取最新镜像机制

---

### [1.0.0] - 2025-08-07

#### 🚀 新功能
- 初始版本发布
- 完整的 Docker 化部署方案
- 前后端分离架构
- 多阶段 Docker 构建
- 自动化构建和推送脚本

#### 🔧 配置变更
- 配置 Maven 阿里云镜像源
- 设置 Nginx 静态文件服务
- 配置 Docker Compose 生产环境

---

## 📝 版本更新模板

### [版本号] - YYYY-MM-DD

#### 🚀 新功能
- 功能描述

#### 🐛 Bug修复
- 修复问题描述

#### ⚡ 性能优化
- 优化内容描述

#### 🔧 配置变更
- 配置变更描述

#### 💥 破坏性变更
- 不兼容变更描述
- 迁移指南

#### 📚 文档更新
- 文档更新内容

---

## 🔄 快速使用指南

### 构建新版本
```bash
# Patch 版本 (默认)
./build-and-push.sh

# Minor 版本
./build-and-push.sh --minor

# Major 版本
./build-and-push.sh --major
```

### 部署指定版本
```bash
# 使用默认版本 (VERSION 文件)
./start-prod.sh

# 使用指定版本
./start-prod.sh 1.2.3

# 使用最新版本
./start-prod.sh latest
```

### 查看当前版本
```bash
cat VERSION
```

*最后更新: 2025-08-07*
